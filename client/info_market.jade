template(name='market')
    .ui.padded.stackable.grid
        .four.wide.column
            if currentUser
                a#add.ui.icon.button(title='add question')
                    i.plus.large.green.icon

                //- +session_edit_value_button key='view_mode' value='market' label='market' icon='shop'
                //- +session_edit_value_button key='view_mode' value='bought' label='bought' icon='money'
                //- +session_edit_value_button key='view_mode' value='selling' label='selling' icon='clock'
                //- +session_edit_value_button key='view_mode' value='sold' label='sold' icon='checkmark'
            +cloud
        .twelve.wide.column
            .ui.basic.segments
                each docs
                    +question_item
                    .ui.divider




template(name='cloud')
    div
    .ui.grey.inline.header 
        i.tags.small.icon
        |tags
    if selected_tags
        //- #clear_tags.ui.secondary.icon.compact.button
        //-     i.remove.icon
        each selected_tags
            .unselect_tag.ui.secondary.compact.button
                strong #{this}
    each all_tags
        .ui.compact.button.select_tag(class=cloud_tag_class) 
            strong #{this.name}
    div
    .ui.grey.inline.header 
        i.user.small.icon
        |authors

    if selected_authors
        //- #clear_tags.ui.secondary.icon.compact.button
        //-     i.remove.icon
        each selected_authors
            .unselect_tag.ui.secondary.compact.button
                strong #{this}
    each all_authors
        .ui.compact.button.select_author(class=cloud_tag_class) 
            strong #{this.name}




template(name='question_item')
    .ui.basic.segment.stackable.grid
        //- .four.wide.column
        //-     a.pointer(href="/item/#{_id}/view")
        //-         img.ui.inline.rounded.image(src="{{c.url image_id width=400 height=300 crop='fill'}}")    
        .sixteen.wide.column
            a.ui.header(href="/item/#{_id}/view")
                |#{question}
            .spacer
            if bounty
                i.green.money.icon
            each tags
                .ui.basic.compact.button #{this}
            .ui.inline.header author:
            .ui.basic.label 
                i.user.outline.icon
                |#{_author_username}
            .ui.inline.header buyers:
            each voters
                .ui.basic.label 
                    |#{buyer_username}
            if can_edit
                if bought
                    .ui.button.cancel
                        i.ban.icon
                        |cancel
            if can_edit
                a.ui.icon.button(href="/item/#{_id}/edit")
                    i.pencil.icon




//- 
//- template(name='set_limit')
//-     .item.set_limit #{amount}
