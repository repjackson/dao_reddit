head
    title dao
    meta(name='viewport', content='user-scalable=no, initial-scale=1.0, maximum-scale=1.3, width=device-width')
    meta(name='apple-mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-status-bar-style', content='black')
    meta(name="msapplication-TileColor" content="#da532c")
    meta(name="theme-color" content="black")
    link(href="https://fonts.googleapis.com/css?family=Ubuntu:300,400&display=swap" rel="stylesheet")
    link(rel="manifest" href="/manifest.json")
    //- script(src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js")
    //- script(src="https://semantic-ui.com/javascript/library/tablesort.js")

    link(rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.4/dist/semantic.min.css")
    script(src='https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js')
    script(src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.4/dist/semantic.min.js")
    // script(async src="https://www.googletagmanager.com/gtag/js?id=UA-156965333-1")
    //- script(async src="//embed.redditmedia.com/widgets/platform.js" charset="UTF-8")        
    
    script.
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-156965333-1');

// template(name='layout')
//     +yield

body 
    +home
                    
template(name='home')
    .ui.stackable.padded.grid
        .row
            .sixteen.wide.center.aligned.column
                each picked_tags
                    button.ui.active.compact.circular.big.button.unpick_tag(tabindex="0" class="#{loading_class} #{active_term_class}")
                        .ui.inline.small.header #{this}
                        //- button.ui.active.large.circular.button.unpick_tag(tabindex='0' style=background_style class=emotion_color)
                //- .ui.inline.small.header(class=emotion_color) {{fixed omega_doc.current_max_emotion_percent}}% #{omega_doc.current_most_emotion}
                // if not_searching 
                //     .ui.center.aligned.basic.segment
                //         i.massive.yin.yang.grey.icon
                .ui.icon.search.input(class=search_class)
                    // if is_loading
                    //     if home_subs_ready
                    unless is_loading
                        i.search.link.icon.refresh_agg
                        // i.yin.yang.big.loading.link.icon.reconnect
                    if is_loading
                        i.yin.yang.big.loading.icon
                    //- input#search(type='text' autofocus='' autocomplete="off" value=current_query)
                    input#search(type='text' autofocus='' autocomplete="off")
                //- .ui.header #{connection.status}
                unless connected
                    //- .ui.header disconnected
                    //- .ui.hidden.divider
                    i.lightning.invert.big.circular.link.icon
                //- div
                if connected
                    // if searching 
                    //     each terms 
                    //         +search_term
                    // else 
                    each unpicked_tags
                        +agg_tag
                if in_dev 
                    .ui.divider
                    .ui.header is_loading #{is_loading}
                    .ui.header current query  {{sval 'current_query'}}
                    .ui.header dummy  {{sval 'dummy'}}
                // .ui.items
                //     each doc_results
                //         // +small_card
                //         .ui.header #{title}
            
            
                   
template(name='shortcut')                   
    i.big.icon.go.spaced.zoomer(class=icon title=key)
                    
template(name='agg_tag')
    button.ui.big.tertiary.button.result(tabindex="0" title=count)
        // if term.image
        //     //- button.ui.compact.circular.button(tabindex="0" title=count)
        //     //- img.ui.mini.inline.image(src=term.image)
        //     img.ui.mini.inline.image(src=term.image)
        //     .ui.inline.small.thin.header(class=tag_result_class) #{title}
        // else
        //     //- button.ui.compact.circular.button(tabindex="0" title=count)
        | #{title}

        //- small #{count}