head
    title dao
    script(data-ad-client='ca-pub-5593374176518194' async='' src='https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js')
    
    meta(name='viewport', content='user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width')
    meta(name='apple-mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-status-bar-style', content='black')
    meta(name="msapplication-TileColor" content="#da532c")
    meta(name="theme-color" content="#000")
    link(rel='stylesheet' type='text/css' href='https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.1/dist/semantic.min.css')
    link(href="https://fonts.googleapis.com/css?family=Ubuntu:300,400&display=swap" rel="stylesheet")

    script(src='https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js')
    script(src='https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.1/dist/semantic.min.js')


body 
    +home




template(name='toggle_facet')
    //- .spacer
    //- if count
    //- .ui.large.button.toggle_facet(class=toggle_facet_class)
    //- .ui.large.disabled.button.toggle_facet
    //- .spacer
    .ui.icon.button.toggle_facet(title="toggle #{label}")
        if icon
            i.icon(class=icon)
        //- if count
        //-     |#{count}
        //- if view_label
        | #{label}

template(name='home')
    .ui.stackable.grid 
        .row 
            .six.wide.column
                i.big.yin.yang.grey.icon(title='dao')
                .ui.left.icon.input
                    i.search.icon
                        //- if selected_tags
                        //-     +inputAutocomplete settings=tag_settings id="tag_search" class="" autofocus='' autocomplete="off" 
                        //- else
                    input#search(type='text' autofocus='' autocomplete="off")
                +tag_cloud
                //- +toggle_facet label='categories' icon='list'
                //- +toggle_facet label='subreddit' icon='reddit'
                //- +toggle_facet label='companies' icon='building'
                //- +toggle_facet label='concepts' icon='cubes'
                //- +toggle_facet label='keywords' icon='tags'
                //- +toggle_facet label='location' icon='marker'
                //- +toggle_facet label='authors' icon='pencil'
                .largescroll
                    +facet key='categories'
                    +toggle_facet label='sentiment' icon='smile outline'  view_label=true
                    if view_sentiment
                        div
                        if selected_sentiments
                            #clear_sentiments.ui.active.icon.compact.small.basic.button
                                i.remove.icon
                            each selected_sentiments
                                .unselect_category.ui.active.compact.small.basic.button
                                    strong #{this}
                                    //- if sentiments.count
                        each sentiments
                            .ui.compact.small.basic.button.select_category(class=cloud_tag_class) 
                                strong #{this.name}
                        div
                    +toggle_facet label='categories' icon='list' count=categories.count view_label=true
                    if view_categories
                        if selected_categories
                            #clear_categories.ui.active.icon.compact.small.basic.button
                                i.remove.icon
                            each selected_categories
                                .unselect_category.ui.active.compact.small.basic.button
                                    strong #{this}
                                    //- if categories.count
                        each categories
                            .ui.compact.small.basic.button.select_category(class=cloud_tag_class) 
                                strong #{this.name}
                        div
                    +toggle_facet label='companies' icon='briefcase' count=companies.count
                    if view_companies                      
                        //- if companies.count
                        //- div
                        if selected_companies
                            //- #clear_companies.ui.active.icon.compact.small.basic.button
                            //-     i.remove.icon
                            each selected_companies
                                .unselect_company.ui.active.compact.small.basic.button
                                    strong #{this}
                        each companies
                            .ui.compact.small.basic.button.select_company(class=cloud_tag_class) 
                                    strong #{this.name}
                        div
                    +toggle_facet label='subreddits' icon='reddit' count=subreddits.count
                    if view_subreddits
                        if view_subreddits
                            //- div
                            if selected_subreddits
                                //- #clear_subreddits.ui.active.icon.compact.small.basic.button
                                //-     i.remove.icon
                                each selected_subreddits
                                    .unselect_subreddit.ui.active.compact.small.basic.button
                                        strong #{this}
                            each subreddits
                                .ui.compact.small.basic.button.select_subreddit(class=cloud_tag_class) 
                                    strong #{this.name}
                    +toggle_facet label='Geographic Feature' icon='mountain'
                    div
                    if view_print_medias
                        if print_medias.count
                            +toggle_facet label='print media' icon='newspaper'
                            div
                            if selected_print_medias
                                //- #clear_print_medias.ui.active.icon.compact.small.basic.button
                                //-     i.remove.icon
                                each selected_print_medias
                                    .unselect_print_media.ui.active.compact.small.basic.button
                                        strong #{this}
                            each print_medias
                                .ui.compact.small.basic.button.select_print_media
                                    strong #{this.name}
                    if view_sports
                        if sports.count   
                            div
                            +toggle_facet label='sports' icon='basketball ball' view_label=true
                            //- div
                            if selected_sports
                                #clear_sports.ui.active.icon.compact.small.basic.button
                                    i.remove.icon
                                each selected_sports
                                    .unselect_sport.ui.active.compact.small.basic.button
                                        strong #{this}
                            each sports
                                .ui.compact.small.basic.button.select_sport(class=cloud_tag_class) 
                                    strong #{this.name}
                    +toggle_facet label='health conditions' icon='health briefcase'
                        if view_health_conditions
                            //- if health_conditions.count
                            div
                            if selected_health_conditions
                                #clear_health_conditions.ui.active.icon.compact.small.basic.button
                                    i.remove.icon
                                each selected_health_conditions
                                    .unselect_health_condition.ui.active.compact.small.basic.button
                                        strong #{this}
                            each health_conditions
                                .ui.compact.small.basic.button.select_health_condition
                                    strong #{this.name}
                    if view_movies
                        if movies.count
                            div
                            +toggle_facet label='movies' icon='video' view_label=true
                            //- div
                            if selected_movies
                                #clear_movies.ui.active.icon.compact.small.basic.button
                                    i.remove.icon
                                each selected_movies
                                    .unselect_movie.ui.active.compact.small.basic.button
                                        strong #{this}
                            each movies
                                .ui.compact.small.basic.button.select_movie(class=cloud_tag_class) 
                                    strong #{this.name}
                    if view_facilities
                        if facilities.count
                            div
                            +toggle_facet label='facilities' icon='building' view_label=true
                            //- div
                            if selected_facilities
                                #clear_facilities.ui.active.icon.compact.small.basic.button
                                    i.remove.icon
                                each selected_facilities
                                    .unselect_facility.ui.active.compact.small.basic.button
                                        strong #{this}
                            each facilities
                                .ui.compact.small.basic.button.select_facility 
                                    strong #{this.name}
                            div
                    if view_locations
                        if locations.count
                            +toggle_facet label='locations' icon='marker' count=locations.count
                            //- div
                            if selected_locations
                                #clear_locations.ui.active.icon.compact.small.basic.button
                                    i.remove.icon
                                each selected_locations
                                    .unselect_location.ui.active.compact.small.basic.button
                                        strong #{this}
                            each locations
                                .ui.compact.small.basic.button.select_location(class=cloud_tag_class) 
                                    strong #{this.name}
                            div
                    if view_organizations
                        if organizations.count
                            +toggle_facet label='organizations' icon='users' count=organizations.count
                            //- div
                            if selected_organizations
                                #clear_organizations.ui.active.icon.compact.small.basic.button
                                    i.remove.icon
                                each selected_organizations
                                    .unselect_organization.ui.active.compact.small.basic.button
                                        strong #{this}
                            each organizations
                                .ui.compact.small.basic.button.select_organization(class=cloud_tag_class) 
                                    strong #{this.name}
                            div
                    if view_people                        
                        if people.count
                            +toggle_facet label='people' icon='user' count=people.count
                            //- div
                            if selected_people
                                #clear_people.ui.active.icon.compact.small.basic.button
                                    i.remove.icon
                                each selected_people
                                    .unselect_person.ui.active.compact.small.basic.button
                                        strong #{this}
                            each people
                                .ui.compact.small.basic.button.select_person(class=cloud_tag_class) 
                                    strong #{this.name}
                            div
                    if view_keywords
                        if keywords.count
                            +toggle_facet label='keywords' icon='tags' count=keywords.count
                            //- div
                            if selected_keywords
                                #clear_keywords.ui.active.icon.compact.small.basic.button
                                    i.remove.icon
                                each selected_keywords
                                    .unselect_keyword.ui.active.compact.small.basic.button
                                        strong #{this}
                            each keywords
                                .ui.compact.small.basic.button.select_keyword(class=cloud_tag_class) 
                                    strong #{this.name}
                            div
                    if view_concepts
                        if concepts.count
                            +toggle_facet label='concepts' icon='cubes' count=concepts.count
                            //- div
                            if selected_concepts.count
                                #clear_concepts.ui.active.icon.compact.small.basic.button
                                    i.remove.icon
                                each selected_concepts
                                    .unselect_concept.ui.active.compact.small.basic.button
                                        strong #{this}
                            each concepts
                                .ui.compact.small.basic.button.select_concept(class=cloud_tag_class) 
                                    strong #{this.name}
                    if view_authors
                        if authors.count
                            +toggle_facet label='authors' icon='pencil' count=authors.count
                            //- div
                            if selected_authors
                                #clear_authors.ui.active.icon.compact.small.basic.button
                                    i.remove.icon
                                each selected_authors
                                    .unselect_author.ui.active.compact.small.basic.button
                                        strong #{this}
                            each authors
                                .ui.compact.small.basic.button.select_author(class=cloud_tag_class) 
                                    strong #{this.name}
                            div
            .ten.wide.column
                .filter_row(class=loading_class)
                    .ui.inline.small.grey.header(title='change sort direction')
                        |sort by
                    .ui.compact.small.menu
                        .ui.simple.dropdown.item
                            strong #{current_sort_label}
                            i.dropdown.icon
                            .menu
                                +set_sort_key key='ups' label='upvotes'
                                +set_sort_key key='_timestamp' label='added'
                                +set_sort_key key='doc_sentiment_label' label='sentiment'
                    .ui.compact.icon.basic.button.set_sort_direction
                        if sorting_up
                            i.sort.amount.down.icon
                        else
                            i.sort.amount.up.icon
                    .ui.compact.icon.basic.button.toggle_detail(title='toggle detail')
                        if view_detail 
                            i.stream.icon 
                        else 
                            i.window.minimize.icon
                    |&nbsp;
                    |&nbsp;
                    .ui.inline.small.grey.header
                        |limit
                    .ui.compact.menu
                        .ui.simple.dropdown.item
                            strong #{current_doc_limit}
                            i.dropdown.icon
                            .menu
                                +set_limit amount=1
                                +set_limit amount=5
                                +set_limit amount=10
                                +set_limit amount=20
                                +set_limit amount=50
                    //- .ui.inline.header
                    //-     |search
                    .ui.small.input
                        input(type='text' placeholder='filter' val=search_value)
                    |&nbsp;
                    |&nbsp;
                    //- .ui.inline.header view
                    //- .ui.compact.menu
                    //-     .ui.simple.dropdown.item
                    //-         |#{current_delta.view_mode}
                    //-         i.dropdown.icon
                    //-         .menu
                    //-             +set_view_mode title='table' icon='table'
                    //-             +set_view_mode title='list' icon='list'
                    //-             +set_view_mode title='cards' icon='cards'
                    //-             +set_view_mode title='items' icon='list'
                    //-             +set_view_mode title='map' icon='map'
                    //-             +set_view_mode title='graph' icon='graph'
            
                .largescroll
                    each posts
                        +post

template(name='set_sort_key')
    .item.set_sort
        |#{label}

template(name='set_view_mode')
    .item.set_view
        i.icon(class=icon)
        |#{title}


template(name='set_limit')
    .item.set_limit #{amount}
                    



template(name='tag_cloud')
    //- #cloud
        .ui.left.icon.input
            i.search.icon
            +inputAutocomplete settings=settings id="search" class="" autocomplete="off" 
        // .ui.hidden.fitted.divider
    if selected_tags
        //- #clear_tags.ui.active.icon.compact.small.basic.button
        //-     i.remove.icon
        each selected_tags
            .unselect_tag.ui.active.large.compact.small.basic.button
                strong #{this}
    //- each tags
    //-     .ui.compact.small.basic.button.select_tag(class=cloud_tag_class) 
    //-         strong #{this.name}
    
    
template(name='tag_result')
    .item #{name}
